<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Posiciones Aleatorias del Pentagrama</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: #f0f0f0;
        }
        .container {
            text-align: center;
            background-color: white;
            padding: 2rem;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        button {
            border: none;
            color: white;
            padding: 15px 32px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 16px;
            margin: 4px 2px;
            cursor: pointer;
            border-radius: 4px;
        }
        .generate {
            background-color: #4caf50;
        }
        .reveal {
            background-color: #2196f3;
            display: none; /* Hide the button by default */
        }
        #result,
        #staff {
            margin-top: 20px;
            font-size: 24px;
            font-weight: bold;
        }
        #staff {
            display: none;
        }
        #staff svg {
            max-width: 100%;
            height: auto;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Posiciones Aleatorias del Pentagrama</h1>
        <button class="generate" onclick="generate()">Generar</button>
        <div id="result"></div>
        <p></p>
        <button class="reveal" onclick="reveal()" id="revealButton">Revelar</button>
        <div id="staff"></div>
    </div>

    <script>
        let currentNumber;
        let currentDirection;

        function generate() {
            currentNumber = Math.floor(Math.random() * 22) + 1;
            currentDirection = Math.random() < 0.5 ? "izquierda" : "derecha";
            document.getElementById("result").innerHTML = `Posici√≥n: ${currentNumber}<br>Mano: ${currentDirection}`;
            document.getElementById("revealButton").style.display = "inline-block";
            document.getElementById("staff").style.display = "none";
        }

        function reveal() {
            const staffSVG = createStaffSVG(currentNumber, currentDirection);
            document.getElementById("staff").innerHTML = staffSVG;
            document.getElementById("staff").style.display = "block";
        }

        function createStaffSVG(position, direction) {
            const svgWidth = 600;
            const svgHeight = 300;
            const lineSpacing = 20;
            const middleSpacing = 20;
            const startY = direction === "izquierda" ? 110 : 90;

            let svg = `<svg width="${svgWidth}" height="${svgHeight}" xmlns="http://www.w3.org/2000/svg">`;

            let noteY;
            if (direction === 'izquierda') {
                noteY = startY + 4.5 * lineSpacing + (11 - position) * lineSpacing / 2;
            } else {
                noteY = startY + (11 - position) * lineSpacing / 2;
            }

            for (let i = 0; i < 5; i++) {
                svg += `<line x1="20" y1="${startY + i * lineSpacing}" x2="${svgWidth - 20}" y2="${startY + i * lineSpacing}" stroke="black" stroke-width="2" />`;
            }

            if (direction === "izquierda") {
                svg += `<text x="30" y="${startY + 54}" font-size="80">ùÑ¢</text>`;
            } else {
                svg += `<text x="30" y="${startY + 70}" font-size="80">ùÑû</text>`;
            }

            svg += `<ellipse cx="300" cy="${noteY}" rx="12" ry="8" fill="black" />`;

            const step = noteY < startY ? -lineSpacing : lineSpacing;
            for (let y = startY; step > 0 ? y <= noteY : y >= noteY; y += step) {
                svg += `<line x1="280" y1="${y}" x2="320" y2="${y}" stroke="black" stroke-width="2" />`;
            }

            svg += "</svg>";
            return svg;
        }
    </script>
</body>
</html>